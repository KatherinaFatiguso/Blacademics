<h1>Listing messages</h1>

<table class="table">
    <tr>
      <th>From</th>
      <th>To</th>
      <th>Long_message</th>
      <th>Status</th>
      <th>Attachment</th>
      <th>User</th>
        <th colspan="3"></th>
    </tr>

    <p>params[:my_id]: <%= params[:my_id] %></p>
    <p>params[:contact_id]: <%= params[:contact_id] %></p>

    <% @user = User.find(params[:contact_id]) %>
    <%= @contact = @user.organisations.company_name %>

    <% %>
  <%= content_tag_for(:tr, @messages) do |message| %>
    <% if (message.from == params[:my_id].to_i) || (message.to == params[:my_id].to_i) %>
      <td><%= message.from %></td>
      <td><%= message.to %></td>
      <td><%= message.long_message %></td>
      <td><%= message.status %></td>
      <td><%= message.attachment %></td>
      <td><%= message.user %></td>
        <td><%= link_to 'Show', message %></td>
      <td><%= link_to 'Edit', edit_message_path(message), class: 'btn btn-edit' %></td>
      <td><%= link_to 'Delete', message, method: :delete, data: { confirm: 'Are you sure?' }, class: 'btn btn-destroy' %></td>
    <% end %>
  <% end %>
</table>


<div class="form-actions">
  <%= link_to 'New Message', new_message_path, class: 'btn btn-success' %>
</div>
